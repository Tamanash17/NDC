# ============================================================================
# NDC BOOKING TOOL - ENTERPRISE CONFIGURATION
# Version 3.1.0 - Multi-Tenant Auth (FIXED)
# ============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
APP_NAME=ndc-backend-enterprise
APP_VERSION=3.1.0
LOG_LEVEL=debug
PRETTY_LOGS=true

# -----------------------------------------------------------------------------
# NDC GATEWAY - FIXED: Separate URLs for Auth and NDC Operations
# Credentials are passed from frontend via headers (multi-tenant support)
# -----------------------------------------------------------------------------
# NDC Operations Base URL
NDC_BASE_URL=https://ndc-api-uat.jetstar.com/ndc

# Auth Endpoint Base URL (different path!)
NDC_AUTH_URL=https://ndc-api-uat.jetstar.com/jq/ndc/api

# UAT Header
NDC_UAT_HEADER=Jetstar3.12

# Required Headers from Frontend:
#   X-NDC-Auth-Domain:       navaborad
#   X-NDC-API-ID:            your-api-id
#   X-NDC-API-Password:      your-password
#   X-NDC-Subscription-Key:  your-subscription-key

# -----------------------------------------------------------------------------
# TOKEN LIFECYCLE CONFIGURATION
# -----------------------------------------------------------------------------
TOKEN_DEFAULT_VALIDITY_MS=1800000
TOKEN_EXPIRY_WARNING_MS=300000
TOKEN_HARD_EXPIRY_BUFFER_MS=30000
TOKEN_CLEANUP_INTERVAL_MS=300000

# -----------------------------------------------------------------------------
# DISTRIBUTION CHAIN DEFAULTS
# -----------------------------------------------------------------------------
DEFAULT_OWNER_CODE=JQ
DEFAULT_ORG_CODE=55778878
DEFAULT_ORG_NAME=PARTNER_ORG
DEFAULT_ORG_ROLE=Distributor
DEFAULT_COUNTRY_CODE=AU
DEFAULT_CITY_CODE=MEL

# -----------------------------------------------------------------------------
# CIRCUIT BREAKER
# -----------------------------------------------------------------------------
CIRCUIT_BREAKER_TIMEOUT=30000
CIRCUIT_BREAKER_ERROR_THRESHOLD=50
CIRCUIT_BREAKER_RESET_TIMEOUT=30000
CIRCUIT_BREAKER_VOLUME_THRESHOLD=5

# -----------------------------------------------------------------------------
# RETRY POLICY
# -----------------------------------------------------------------------------
RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_DELAY=1000
RETRY_MAX_DELAY=10000
RETRY_BACKOFF_FACTOR=2

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_NDC_MAX=30
RATE_LIMIT_STRICT_MAX=10

# -----------------------------------------------------------------------------
# REQUEST TIMEOUTS
# -----------------------------------------------------------------------------
REQUEST_TIMEOUT_MS=60000
KEEP_ALIVE_TIMEOUT_MS=65000
NDC_REQUEST_TIMEOUT_MS=45000

# -----------------------------------------------------------------------------
# LOGGING AND OBSERVABILITY
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PATH=/metrics
ENABLE_REQUEST_LOGGING=true
ENABLE_XML_LOGGING=true
XML_LOG_DIR=./logs/xml
XML_LOG_RETENTION_DAYS=7
MASK_SENSITIVE_DATA=true

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:3001
TRUST_PROXY=false